Uize=(function(){'use strict';var
_package=function(){},_undefined,_typeString='string',_typeObject='object',_typeNumber='number',_typeBoolean='boolean',_typeFunction='function',_Function=Function,_Array=Array,_false=false,_true=true,_null=null,_trueFlag={},_ObjectToString=Object.prototype.toString,_isString,_clone,_constrain,_forEach,_resolveTransformer,_values,_isObject,_canExtend,_isPlainObject,_isArray,_isList,_isFunction,_isPrimitive,_uizeGuids=0,_sacredEmptyArray=[],_scriptParentNode,_interpreterSupportsArrayIndexOf=!!(_Array.indexOf&&_Array.lastIndexOf),_whitespaceCharLettersLookup={'\n':'n','\r':'r','\t':'t'};function _escapeRegExpLiteral(_literal){return(_literal.replace(/([\^\$\|\{\}\[\]\(\)\?\.\*\+\\])/g,'\\$1').replace(/[\n\r\t]/g,function(_whitespaceChar){return'\\'+_whitespaceCharLettersLookup[_whitespaceChar]}));}
function _resolveListyArgs(_arguments){return _arguments.length==1&&_isArray(_arguments[0])?_arguments[0]:_arguments;}
function _resolveTargetLookup(_safeOrTarget){return(_isObject(_safeOrTarget)?_safeOrTarget:_safeOrTarget?{constructor:_undefined,toLocaleString:_undefined,toString:_undefined,valueOf:_undefined}:{});}
function _performOperationWithMultipleSources(_sources,_operation,_target){var _targetIsWithSources=!_target;if(_targetIsWithSources)
_target=_sources[0];if(!_targetIsWithSources||_canExtend(_target)){var
_source=_sources[+_targetIsWithSources],_sourcesLength=_sources.length;_canExtend(_source)&&_operation(_target,_source);if(_sourcesLength>_targetIsWithSources+1){for(var _sourceNo=+_targetIsWithSources;++_sourceNo<_sourcesLength;)
_canExtend(_source=_sources[_sourceNo])&&_operation(_target,_source);}}
return _target;}
function _copySourceIntoTarget(_target,_source){for(var _property in _source)
_target[_property]=_source[_property];return _target;}
function _mergeSourceIntoTarget(_target,_source){var
_targetPropertyValue,_sourcePropertyValue;for(var _property in _source)
(_isPlainObject(_sourcePropertyValue=_source[_property])&&_isPlainObject(_targetPropertyValue=_target[_property]))?_mergeSourceIntoTarget(_targetPropertyValue,_sourcePropertyValue):(_target[_property]=_sourcePropertyValue);}
_copySourceIntoTarget(_package,{capFirstChar:function(_sourceStr){return _sourceStr.charAt(0).toUpperCase()+_sourceStr.slice(1);},clone:_clone=function(_value){if(_value==_undefined)return _value;var _typeofValue=typeof _value;if(_typeofValue==_typeString||_typeofValue==_typeNumber||_typeofValue==_typeBoolean||_isFunction(_value))
return _value;var _constructor=_value.constructor;if(_constructor==Date||_constructor==String||_constructor==Number||_constructor==Boolean){return new _constructor(_value.valueOf())}else if(_constructor==RegExp){return new RegExp(_value.source,(_value.global?'g':'')+(_value.ignoreCase?'i':'')+(_value.multiline?'m':''));}
var
_valueIsSimpleObject=_constructor==Object,_valueIsArray=!_valueIsSimpleObject&&_isArray(_value);if(_valueIsSimpleObject||_valueIsArray){var
_subValue,_typeofSubValue,_result=_valueIsSimpleObject?{}:[];if(_valueIsArray)_result.length=_value.length;for(var _property in _value)
_result[_property]=(_typeofSubValue=typeof(_subValue=_value[_property]))==_typeString||_typeofSubValue==_typeNumber||_typeofSubValue==_typeBoolean||_subValue==_undefined?_subValue:_clone(_subValue);return _result;}
return _value;},constrain:_constrain=function(_value,_limitA,_limitB){return(_limitA<_limitB?(_value<_limitA?_limitA:_value>_limitB?_limitB:_value):(_value<_limitB?_limitB:_value>_limitA?_limitA:_value));},inRange:function(_value,_limitA,_limitB){return _value==_constrain(_value,_limitA,_limitB);},copyInto:function(){return _performOperationWithMultipleSources(arguments,_copySourceIntoTarget);},copy:function(){return _performOperationWithMultipleSources(arguments,_copySourceIntoTarget,{});},mergeInto:function(){return _performOperationWithMultipleSources(arguments,_mergeSourceIntoTarget);},merge:function(){return _performOperationWithMultipleSources(arguments,_mergeSourceIntoTarget,{});},forEach:_forEach=function(_source,_iterationHandler,_context,_allArrayElements){if(_source){var
_sourceIsObject=_isObject(_source),_sourceIsArray=_sourceIsObject&&_isArray(_source);if(!_sourceIsArray||_source.length){if(typeof _iterationHandler==_typeString)
_iterationHandler=_Function('value,key,source',_iterationHandler);if(_sourceIsObject){if(_sourceIsArray||_package.isArguments(_source)){var _arrayInstanceForEach=_sacredEmptyArray.forEach;if(_arrayInstanceForEach&&!(_sourceIsArray&&_allArrayElements)){_arrayInstanceForEach.call(_source,_iterationHandler,_context);}else{for(var _index=-1,_sourceLength=_source.length;++_index<_sourceLength;)
(_allArrayElements||_index in _source)&&_iterationHandler.call(_context,_source[_index],_index,_source);}}else{for(var _index in _source)
_iterationHandler.call(_context,_source[_index],_index,_source);}}else if(typeof _source==_typeNumber){for(var _index=-1;++_index<_source;)
_iterationHandler.call(_context,_index,_index,_source);}}}},resolveTransformer:_resolveTransformer=function(_transformer){var _typeofTransformer=typeof _transformer;return(_transformer==_undefined?_package.returnX:_typeofTransformer==_typeFunction?_transformer:_typeofTransformer=='string'?_Function('value,key','return '+_transformer):_typeofTransformer=='object'?(_package.isRegExp(_transformer)?function(_value){return _transformer.test(_value+'')}:_isArray(_transformer)?function(_value){return _transformer[+_value]}:function(_value){return _transformer.hasOwnProperty(_value)?_transformer[_value]:_value}):function(){return _transformer});},resolveMatcher:function(_matcher){return _matcher==_undefined?_package.returnTrue:_resolveTransformer(_matcher);},map:function(_source,_mapper,_target){if(typeof _source==_typeNumber){_source=new _Array(_source);if(typeof _target!=_typeObject)_target=_source;}
_mapper=_resolveTransformer(_mapper);if(typeof _target!=_typeObject)
_target=_target===_false?_source:_isArray(_source)?[]:{};_forEach(_source,function(_value,_key){var _mappedValue=_mapper.call(_source,_value,_key);if(_target)_target[_key]=_mappedValue;},0,_true);return _target;},applyAll:function(_context,_functions,_arguments){_arguments||(_arguments=_sacredEmptyArray);for(var _functionNo=-1,_functionsLength=_functions.length;++_functionNo<_functionsLength;)
_functions[_functionNo].apply(_context,_arguments);},callOn:function(_target,_method,_arguments){var
_methodIsString=_isString(_method),_methodIsFunction=!_methodIsString&&_isFunction(_method);_arguments||(_arguments=_sacredEmptyArray);function _callOn(_target){if(_target!=_undefined)
_isPlainObject(_target)||_isArray(_target)?_forEach(_target,_callOn,0,_true):_methodIsFunction||(_methodIsString&&_isFunction(_target[_method]))?(_methodIsFunction?_method:_target[_method]).apply(_target,_arguments):0;}
if(_methodIsString||_methodIsFunction)
_callOn(_target);},defaultNully:function(_value,_default){return _value!=_undefined?_value:_default;},indexIn:function(_source,_value,_fromEnd,_strict){var
_sourceIsList=_isList(_source),_result=-1;if(_sourceIsList||_isObject(_source)){var _sourceValues=_sourceIsList?_source:_values(_source);if((_strict=_strict!==_false)&&_interpreterSupportsArrayIndexOf){_result=_Array[_fromEnd?'lastIndexOf':'indexOf'](_sourceValues,_value);}else{for(var
_elementNo=_sourceValues.length,_index=_fromEnd?_elementNo:-1,_indexInc=_fromEnd?-1:1;--_elementNo>=0;){var _element=_sourceValues[_index+=_indexInc];if(_strict?_element===_value:_element==_value){_result=_index;break;}}}
if(!_sourceIsList&&_result>-1)
_result=_package.keys(_source)[_result];}
return _result;},keys:function(_object){var _result=[];if(!_isString(_object))
for(var _key in _object)_result.push(_key);return _result;},totalKeys:function(_object){var _result=0;if(!_isString(_object))
for(var _key in _object)_result++;return _result;},values:_values=function(_object){if(_isArray(_object))return _object;var _result=[];if(!_isString(_object))
for(var _key in _object)_result.push(_object[_key]);return _result;},meldKeysValues:function(_keys,_values){var _result={};for(var _keyNo=-1,_keysLength=Math.min(_keys.length,_values.length);++_keyNo<_keysLength;)
_result[_keys[_keyNo]]=_values[_keyNo];return _result;},min:function(_object){return Math.min.apply(0,_values(_object));},max:function(_object){return Math.max.apply(0,_values(_object));},reverseLookup:function(_object,_safeOrTarget){var _lookup=_resolveTargetLookup(_safeOrTarget);if(!_isString(_object))
for(var _key in _object)_lookup[_object[_key]+'']=_key;return _lookup;},lookup:function(_values,_lookupValue,_safeOrTarget){var _lookup=_resolveTargetLookup(_safeOrTarget);if(arguments.length==1)_lookupValue=_true;if(_values!=_undefined){for(var _valueNo=-1,_valuesLength=_values.length;++_valueNo<_valuesLength;)
_lookup[_values[_valueNo]]=_lookupValue;}
return _lookup;},isObject:_isObject=function(_value){return!!_value&&typeof _value==_typeObject;},canExtend:_canExtend=function(_value){var _typeofValue=typeof _value;return!!_value&&(_typeofValue==_typeObject||_typeofValue==_typeFunction);},isPlainObject:_isPlainObject=function(_value){var _valueConstructor=_value&&_value.constructor;return!!(_valueConstructor&&(_valueConstructor==Object||(typeof _valueConstructor.prototype.hasOwnProperty==_typeFunction&&_valueConstructor.prototype.hasOwnProperty('hasOwnProperty'))));},isArray:_isArray=function(_value){return _value instanceof _Array||(!!_value&&_isFunction(_value.splice));},isList:_isList=function(_value){return _isObject(_value)&&typeof _value.length==_typeNumber;},isArguments:function(_value){return(_isList(_value)&&(_ObjectToString.call(_value)=='[object Arguments]'||typeof _value.callee==_typeFunction));},isFunction:_isFunction=function(_value){var _constructor=_value&&_value.constructor;return!!(_constructor&&_constructor==_constructor.constructor);},isNumber:function(_value){return typeof _value==_typeNumber&&_value===_value;},isString:_isString=function(_value){return typeof _value==_typeString;},isBoolean:function(_value){return typeof _value==_typeBoolean;},isNully:function(_value){return _value==_undefined;},isPrimitive:_isPrimitive=function(_value){return _value!=_undefined&&!(_value instanceof _value.constructor);},isRegExp:function(_value){return _ObjectToString.call(_value)=='[object RegExp]';},isIn:function(_source,_value,_strict){return _package.indexIn(_source,_value,_false,_strict)!==-1;},isEmpty:function(_object){if(_isObject(_object)&&_isObject(_object=_object.valueOf())){if(_isArray(_object))return!_object.length;for(var _key in _object)return _false;return _true;}
return!_object;},isNaN:function(_value){return _value!==_value;},isSameAs:function(_value,_otherValue){return _value===_otherValue||(_value!==_value&&_otherValue!==_otherValue);},emptyOut:function(_source){if(_isObject(_source)){if(_isArray(_source)){_source.length=0;}else{for(var _property in _source)
delete _source[_property];}}
return _source;},recordMatches:function(_record,_match){if(!_record)return!_match;if(_isFunction(_match))return _match(_record);for(var _property in _match){if(_record[_property]!==_match[_property])return _false;}
return _true;},toNumber:function(_value,_defaultValue){if(typeof _value==_typeNumber){if(_value==_value)return _value;}else{if(_isFunction(_value))_value=_value();if(_isObject(_value))_value=_value.valueOf();}
return((_value=_value==_undefined||_value===''||_value!==_value||!_isPrimitive(_value)?NaN:+_value)!=_value&&arguments.length>1?_defaultValue:_value);},copyList:function(_list){return _sacredEmptyArray.slice.call(_list);},push:function(_targetList,_sourceList){_sacredEmptyArray.push.apply(_targetList,_isArray(_sourceList)?_sourceList:_package.copyList(_sourceList));return _targetList;},findRecordNo:function(_records,_match,_defaultNoIfNoMatch){for(var _recordNo=-1,_recordsLength=_records?_records.length:0;++_recordNo<_recordsLength;)
if(_package.recordMatches(_records[_recordNo],_match))return _recordNo;return _constrain(_package.toNumber(_defaultNoIfNoMatch,-1),-1,_recordsLength-1);},findRecord:function(_records,_match,_defaultNoIfNoMatch){var _recordNo=_package.findRecordNo(_records,_match,_defaultNoIfNoMatch);return _recordNo>-1?_records[_recordNo]:null;},getClass:function(_instanceOrClass){return(_instanceOrClass==_undefined?_undefined:typeof _instanceOrClass==_typeFunction?_instanceOrClass:_instanceOrClass.constructor);},getGuid:function(){return'uizeGuid'+_uizeGuids++;},global:_Function('return (function () {return this}) ()'),eval:_Function('\'use strict\'; return eval (arguments [0])'),laxEval:_Function('return eval (arguments [0])'),quarantine:function(_function){var
_functionArguments=(_function+='').slice(_function.indexOf('(')+1,_function.indexOf(')')),_functionBody=_function.slice(_function.indexOf('{')+1,_function.lastIndexOf('}'));return _functionArguments?_Function(_functionArguments,_functionBody):_Function(_functionBody);},isInstance:function(_value){return!!(typeof _value==_typeObject&&_value&&_value.constructor.subclass);},nop:_Function(),returnFalse:_Function('return false'),returnTrue:_Function('return true'),returnX:_Function('x','return x'),package:function(_statics){return _copySourceIntoTarget(function(){},_statics);},pairUp:function(_firstArg){var
_result={},_arguments=_resolveListyArgs(arguments),_argumentsLength=_arguments.length;if(_argumentsLength<3){_result[_arguments[0]]=_arguments[1];}else{for(var _argumentNo=-2;(_argumentNo+=2)<_argumentsLength;)
_result[_arguments[_argumentNo]]=_arguments[_argumentNo+1];}
return _result;},escapeRegExpLiteral:_escapeRegExpLiteral,substituteInto:function(_source,_substitutions,_tokenNaming){if(!(_source=_source==_undefined?'':_source+'')||_substitutions==_undefined)
return _source;if(_isPrimitive(_substitutions))
_substitutions=[_substitutions];var
_tokenOpenerAndCloser=(_tokenNaming||'[#KEY]').split('KEY'),_substitutionsForRegExp=[];for(var _substitution in _substitutions)
_substitutionsForRegExp.push(_escapeRegExpLiteral(_substitution));return _source.replace(new RegExp(_escapeRegExpLiteral(_tokenOpenerAndCloser[0])+'('+_substitutionsForRegExp.join('|')+')'+
_escapeRegExpLiteral(_tokenOpenerAndCloser[1]),'g'),function(_token,_substitution){return _substitutions[_substitution]+''});},noNew:function(_constructor){var _constructorCallIsShim;function _constructorSupportingNoNew(){if(_constructorCallIsShim){_constructorCallIsShim=_false;return this;}else{var m=this;if(m==_undefined||m.constructor!=_constructorSupportingNoNew){_constructorCallIsShim=_true;m=new _constructorSupportingNoNew;}
_constructor.apply(m,arguments);return m;}}
return _constructorSupportingNoNew;},now:_Function('return '+(Date.now?'Date.now()':'+new Date')),since:function(_date){return Uize.now()-_date;}});var
_Barrier=function(){var m=this;m._doneLookup={};m._doneResults={};m._doneHandlers={};},_BarrierPrototype=_Barrier.prototype;_BarrierPrototype.done=function(_condition,_result){var
m=this,_doneHandlers=m._doneHandlers[_condition];m._doneLookup[_condition]=_trueFlag;m._doneResults[_condition]=_result;if(_doneHandlers){delete m._doneHandlers[_condition];for(var _doneHandlerNo=-1,_doneHandlersLength=_doneHandlers.length;++_doneHandlerNo<_doneHandlersLength;)
_doneHandlers[_doneHandlerNo](_result);}};_BarrierPrototype.once=function(_conditions,_handler){var m=this;if(_isList(_conditions)&&_conditions.length<2)
_conditions=_conditions[0];if(_conditions==_undefined){_handler();}else if(_isList(_conditions)){var
_results=[],_conditionsLength=_conditions.length,_conditionsDone=0;_forEach(_conditions,function(_condition,_conditionNo){m.once(_condition,function(_result){_results[_conditionNo]=_result;(++_conditionsDone==_conditionsLength)&&_handler.apply(0,_results);});});}else{m._doneLookup[_conditions]==_trueFlag?_handler(m._doneResults[_conditions]):(m._doneHandlers[_conditions]||(m._doneHandlers[_conditions]=[])).push(_handler);}};var
_modulePathToken='[#modulePath]',_modulesByName={},_moduleDefinitionsClaimed={},_modulesAlreadyInvoked={},_modulesLoadedBarrier=new _Barrier(),_folderOrgNamespaces=[],_folderOrgNamespaceRegExp,_getModuleByName,_resolveModuleDefinition;function _wrapModuleNameSegments(_moduleName){return _moduleName.replace(/\.([^\.]+)/g,function(_match,_nameSegment){return'[\''+_nameSegment+'\']'});}
_copySourceIntoTarget(_package,{getModuleByName:_getModuleByName=function(_moduleName){var _module;return(typeof _moduleName==_typeString?(_modulesByName[_moduleName]||(_moduleName=='*'&&_modulesByName)||((_module=_Function('try {return '+_wrapModuleNameSegments(_moduleName)+'} catch (e) {}')())&&(_modulesByName[_moduleName]=_module))):_moduleName);},resolveModuleDefinition:_resolveModuleDefinition=function(_definition){if(_isString(_definition))_definition={name:_definition};var
_name=_definition.name=_definition.name||'',_host=_definition.host=_name.substr(0,_name.lastIndexOf('.')),_superclass=_definition.superclass||_host,_required=_definition.required;_required=_definition.required=_isString(_required)?_required.split(','):_required||[];_host&&_required.push(_host);_superclass!=_host&&_required.push(_superclass);return _definition;},require:function(_modules,_callback){if(typeof _modules==_typeString)
_modules=[_modules];_callback&&_modulesLoadedBarrier.once(_modules,_callback);_forEach(_modules,function(_module){if(_modulesAlreadyInvoked[_module]!=_trueFlag){_modulesAlreadyInvoked[_module]=_trueFlag;_package.moduleLoader(_module,function(_moduleCode){_moduleCode&&_package.laxEval(_moduleCode)})}});},getPathToLibrary:function(_moduleFilename,_moduleToken){if(typeof document!='undefined'&&document.getElementsByTagName){for(var
_scriptTagNo=-1,_scriptTags=document.getElementsByTagName('SCRIPT'),_scriptTagsLength=_scriptTags.length,_scriptSrc,_moduleFilenamePos;++_scriptTagNo<_scriptTagsLength;){if((_moduleFilenamePos=(_scriptSrc=_scriptTags[_scriptTagNo].src).indexOf(_moduleFilename))>-1)
return(_moduleToken?_scriptSrc.replace(_moduleFilename,_moduleToken):_scriptSrc.slice(0,_scriptSrc.lastIndexOf('/',_moduleFilenamePos)+1));}}
return'';},module:function(_definition){var _name=(_definition=_resolveModuleDefinition(_definition)).name;if(!_name||_moduleDefinitionsClaimed[_name]!=_trueFlag){_moduleDefinitionsClaimed[_name]=_modulesAlreadyInvoked[_name]=_trueFlag;var _required=_definition.required;_package.require(_required,function(){var
_module,_builder=_definition.builder;if(_builder){for(var _requiredNo=_required.length,_requiredLookup={};--_requiredNo>=0;){var _requireModule=_required[_requiredNo];_requiredLookup[_requireModule]=_modulesByName[_requireModule];}
_module=_builder(_modulesByName[_definition.superclass||_definition.host||''],_requiredLookup);}
if(_name){_module=_modulesByName[_name]=_module||function(){};(_Function(_wrapModuleNameSegments(_name)+'=arguments[0]'))(_module);var _lastPeriodPos=_name.lastIndexOf('.');if(_lastPeriodPos>-1)
(_getModuleByName(_name.slice(0,_lastPeriodPos)).nonInheritableStatics||{})[_name.slice(_lastPeriodPos+1)]=1;}
if(_isFunction(_module)){_module.moduleName=_name;_module.pathToResources=_module==_package?_package.getPathToLibrary('Uize.js'):_package.moduleUrlTemplate.replace(_modulePathToken,_package.modulePathResolver(_name).replace(/\./g,'_')+'/');}
_modulesLoadedBarrier.done(_name,_module);});}},moduleLoader:function(_moduleToLoad,_callback){var _scriptNode=document.createElement('script');_scriptNode.async=true;_scriptNode.type='text/javascript';_scriptNode.src=_package.moduleUrlResolver(_moduleToLoad);(_scriptParentNode||(_scriptParentNode=document.getElementsByTagName('HEAD')[0])).appendChild(_scriptNode);},modulePathResolver:function(_moduleName){var _folderOrgNamespaceMatch=_moduleName.match(_folderOrgNamespaceRegExp);return(_folderOrgNamespaceMatch?_folderOrgNamespaceMatch[1].replace(/\./g,'_')+_folderOrgNamespaceMatch[2].replace(/\./g,'/'):_moduleName);},addFolderOrgNamespaces:function(){_folderOrgNamespaceRegExp=new RegExp('^('+
_package.map(_package.push(_folderOrgNamespaces,_resolveListyArgs(arguments)),_escapeRegExpLiteral).join('|')+')(\\..+|$)');},moduleUrlResolver:function(_moduleName){return _package.moduleUrlTemplate.replace(_modulePathToken,_package.modulePathResolver(_moduleName)+'.js');}});_package.moduleUrlTemplate=_package.getPathToLibrary('Uize.js',_modulePathToken);_package.addFolderOrgNamespaces('Uize');_package.module({name:'Uize',builder:function(){return _package}});return _package;})();